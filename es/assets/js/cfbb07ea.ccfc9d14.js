"use strict";(self.webpackChunkink_docs=self.webpackChunkink_docs||[]).push([[4069],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>f});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=r.createContext({}),i=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=i(e.components);return r.createElement(c.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=i(t),d=o,f=p["".concat(c,".").concat(d)]||p[d]||m[d]||a;return t?r.createElement(f,s(s({ref:n},u),{},{components:t})):r.createElement(f,s({ref:n},u))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=d;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l[p]="string"==typeof e?e:o,s[1]=l;for(var i=2;i<a;i++)s[i]=t[i];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5962:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>i});var r=t(7462),o=(t(7294),t(3905));const a={title:"#[ink(selector = S:u32)]",slug:"/macros-attributes/selector"},s=void 0,l={unversionedId:"macros-attributes/selector",id:"macros-attributes/selector",title:"#[ink(selector = S:u32)]",description:"Aplicable a los mensajes y constructores ink!.",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/macros-attributes/selector.md",sourceDirName:"macros-attributes",slug:"/macros-attributes/selector",permalink:"/es/macros-attributes/selector",draft:!1,editUrl:"https://github.com/paritytech/ink-docs/edit/master/docs/macros-attributes/selector.md",tags:[],version:"current",frontMatter:{title:"#[ink(selector = S:u32)]",slug:"/macros-attributes/selector"},sidebar:"reference",previous:{title:"#[ink(payable)]",permalink:"/es/macros-attributes/payable"},next:{title:"#[ink(storage)]",permalink:"/es/macros-attributes/storage"}},c={},i=[{value:"Ejemplos",id:"ejemplos",level:2},{value:"Controlar el selector de mensajes",id:"controlar-el-selector-de-mensajes",level:2}],u={toc:i};function p(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Aplicable a los mensajes y constructores ink!."),(0,o.kt)("p",null,"Por defecto ink! crea un selector para cada mensaje y constructor.\nEsto es necesario ya que el contrato es compilado a un Wasm blob y las funciones son invocadas invocando el\nselector, que identifica un m\xe9todo - los nombres de los m\xe9todos ya no est\xe1n disponibles en estas capas subyacentes."),(0,o.kt)("p",null,"Utilizando este atributo es posible especificar un selector de dispatch concreto para la entidad marcada. Esto permite que el autor de un contrato controle con precisi\xf3n los selectores de sus APIs, lo que permite cambiar el nombre de su API sin interrupciones."),(0,o.kt)("p",null,"Un selector debe ser un entero decodificable ",(0,o.kt)("inlineCode",{parentName:"p"},"u32"),". Por ejemplo"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"selector = 0xCAFEBABE")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"selector = 42"))),(0,o.kt)("p",null,"Una excepci\xf3n es el selector fallback ",(0,o.kt)("inlineCode",{parentName:"p"},"_"),", permitiendo que las llamadas a contratos no concuerden con ninguno\nde los otros selectores de mensajes se env\xeden a un mensaje fallback. Mensajes fallback pueden ser ",(0,o.kt)("inlineCode",{parentName:"p"},"payable"),"."),(0,o.kt)("h2",{id:"ejemplos"},"Ejemplos"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"#[ink(message, selector = 0xC0DECAFE)]\nfn my_message_1(&self) {}\n\n#[ink(message, selector = 42)]\nfn my_message_2(&self) {}\n\n#[ink(message, payable, selector = _)]\nfn my_fallback(&self) {}\n")),(0,o.kt)("p",null,"\u2026 Entonces el selector de ",(0,o.kt)("inlineCode",{parentName:"p"},"my_message_1")," es ",(0,o.kt)("inlineCode",{parentName:"p"},"[0xC0, 0xDE, 0xCA, 0xFE]")," y el selector de ",(0,o.kt)("inlineCode",{parentName:"p"},"my_message_2")," es ",(0,o.kt)("inlineCode",{parentName:"p"},"[0, 0, 0, 42]"),"\nya que configurar el selector manualmente anula el selector generado autom\xe1ticamente."),(0,o.kt)("h2",{id:"controlar-el-selector-de-mensajes"},"Controlar el selector de mensajes"),(0,o.kt)("p",null,"Cada mensaje y constructor ink! tiene un selector con el que el mensaje o constructor\nse puede identificar de forma \xfanica dentro del smart contract de ink!.\nLos selectores de mensaje o constructor no \xfanico conduce a un error de tiempo de compilaci\xf3n.\nEstos selectores principalmente pueden conducir el dispatch del contrato al llamarlo. "),(0,o.kt)("p",null,"Un autor de un smart contract ink! puede controlar el selector de un mensaje o constructor ink!\nutilizando la marca ",(0,o.kt)("inlineCode",{parentName:"p"},"selector")," flag. Un ejemplo se muestra a continuaci\xf3n:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"#[ink::contract]\nmod flipper {\n    #[ink(storage)]\n    pub struct Flipper {\n        value: bool,\n    }\n\n    impl Flipper {\n        #[ink(constructor)]\n        #[ink(selector = 0xDEADBEEF)] // Funciona en constructores tambien.\n        pub fn new(initial_value: bool) -> Self {\n            Flipper { value: initial_value }\n        }\n\n        #[ink(message)]\n        #[ink(selector = 0xCAFEBABE)] // Puedes espec\xedficar el selector out-of-line.\n        pub fn flip(&mut self) {\n            self.value = !self.value;\n        }\n        \n        #[ink(message, selector = 0xC0DECAFE)] // ...o especificar el selector inline.\n        pub fn get(&self) -> bool {\n            self.value\n        }\n    }\n}\n")))}p.isMDXComponent=!0}}]);