<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="stylesheet" href="fonts/fonts.css"><title data-react-helmet="true">#[ink(message)] | ink! documentation</title><meta data-react-helmet="true" property="og:url" content="https://github.com/paritytech/ink/ink-docs/macros-attributes/message"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="#[ink(message)] | ink! documentation"><meta data-react-helmet="true" name="description" content="Applicable to methods."><meta data-react-helmet="true" property="og:description" content="Applicable to methods."><link data-react-helmet="true" rel="shortcut icon" href="/ink-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/paritytech/ink/ink-docs/macros-attributes/message"><link data-react-helmet="true" rel="alternate" href="https://github.com/paritytech/ink/ink-docs/macros-attributes/message" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/paritytech/ink/ink-docs/macros-attributes/message" hreflang="x-default"><link rel="stylesheet" href="/ink-docs/assets/css/styles.92582b29.css">
<link rel="preload" href="/ink-docs/assets/js/runtime~main.3dd13ff8.js" as="script">
<link rel="preload" href="/ink-docs/assets/js/main.54cb193b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ink-docs/"><img src="/ink-docs/img/logo-black.svg" alt="ink!" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/ink-docs/img/logo-white.svg" alt="ink!" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/paritytech/ink" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>ink! GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/paritytech/ink-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Docs GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Basics</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Macros &amp; Attributes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/contract">#[ink::contract]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/anonymous">#[ink(anonymous)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/constructor">#[ink(constructor)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/event">#[ink(event)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/impl">#[ink(impl)]</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/ink-docs/macros-attributes/message">#[ink(message)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/namespace">#[ink(namespace = &quot;â€¦&quot;)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/payable">#[ink(payable)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/selector">#[ink(selector = &quot;â€¦&quot;)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/storage">#[ink(storage)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/topic">#[ink(topic)]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/macros-attributes/chain-extension">#[ink::chain_extension]</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Storage &amp; Data Structures</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Examples</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">cargo-contract CLI</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Canvas Test Network</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">#[ink(message)]</h1></header><p>Applicable to methods.</p><p>Flags a method for the ink! storage struct as message making it available to the API for calling the contract. </p><p>Note that all public functions must use the <code>#[ink(message)]</code> attribute</p><p>There must be at least one <code>#[ink(message)]</code> defined method.</p><p>Methods flagged with <code>#[ink(message)]</code> are special in that they are dispatchable
upon contract invocation. The set of ink! messages defined for an ink! smart contract
define its API surface with which users are allowed to interact.</p><p>An ink! smart contract can have multiple such ink! messages defined.</p><p>An ink! message with a <code>&amp;self</code> receiver may only read state whereas an ink! message
with a <code>&amp;mut self</code> receiver may mutate the contract&#x27;s storage.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9a86fd"><span class="token plain">#[ink(message)]</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">pub fn purely_reading(&amp;self, from: AccountId) {</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    // actual implementation</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">}</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">#[ink(message)]</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">pub fn mutates_storage(&amp;mut self, from: AccountId) {</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    // actual implementation</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="messages-return-value"></a>Messages Return Value<a class="hash-link" href="#messages-return-value" title="Direct link to heading">#</a></h2><p>The return value of a message needs to implement <code>scale::Encode</code>.</p><p>It is notable that the collections under <code>ink_storage</code> â€’ such as e.g. <code>Vec</code> or <code>HashMap</code> â€’
don&#x27;t implement <code>scale::Encode</code>. This means you can&#x27;t just return a <code>Vec</code> from an ink! message.
This restriction is intentional â€’ returning a complete data structure with a potentially unbounded
content is an anti-pattern for smart contracts. Just think about the unpredicatble gas costs.</p><p>If you <em>really really</em> need to return a data structure in its entirety then use the ones from
<code>ink_prelude</code> (e.g. <code>ink_prelude::vec::Vec</code>). Those implement <code>scale::Encode</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h2><p>Given the <code>Flipper</code> contract definition above we add some <code>#[ink(message)]</code> definitions
as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="background-color:#2a2734;color:#9a86fd"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9a86fd"><span class="token plain">use ink_lang as ink;</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">#[ink::contract]</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">mod flipper {</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    #[ink(storage)]</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    pub struct Flipper {</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        value: bool,</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    }</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    impl Flipper {</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        #[ink(constructor)]</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        pub fn new(initial_value: bool) -&gt; Self {</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            Flipper { value: false }</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        }</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        /// Flips the current value.</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        #[ink(message)]</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        pub fn flip(&amp;mut self) {</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            self.value = !self.value;</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        }</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        /// Returns the current value.</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        #[ink(message)]</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        pub fn get(&amp;self) -&gt; bool {</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">            self.value</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">        }</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">    }</span></span><span class="token-line" style="color:#9a86fd"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/ink-docs/edit/master/docs/macros-attributes/message.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ink-docs/macros-attributes/impl"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« #[ink(impl)]</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ink-docs/macros-attributes/namespace"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">#[ink(namespace = &quot;â€¦&quot;)] Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#messages-return-value" class="table-of-contents__link">Messages Return Value</a></li><li><a href="#example" class="table-of-contents__link">Example</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/ink-docs/assets/js/runtime~main.3dd13ff8.js"></script>
<script src="/ink-docs/assets/js/main.54cb193b.js"></script>
</body>
</html>