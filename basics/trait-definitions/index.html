<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="stylesheet" href="fonts/fonts.css"><title data-react-helmet="true">Trait Definitions | ink! documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Trait Definitions | ink! documentation"><meta data-react-helmet="true" name="description" content="See e.g. the examples/trait-erc20 contract on how to utilize it or the documentation for details."><meta data-react-helmet="true" property="og:description" content="See e.g. the examples/trait-erc20 contract on how to utilize it or the documentation for details."><meta data-react-helmet="true" property="og:url" content="https://github.com/paritytech/ink/ink-docs/basics/trait-definitions"><link data-react-helmet="true" rel="shortcut icon" href="/ink-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/paritytech/ink/ink-docs/basics/trait-definitions"><link rel="stylesheet" href="/ink-docs/styles.25915df3.css">
<link rel="preload" href="/ink-docs/styles.95ffbc63.js" as="script">
<link rel="preload" href="/ink-docs/runtime~main.515953f5.js" as="script">
<link rel="preload" href="/ink-docs/main.5a793521.js" as="script">
<link rel="preload" href="/ink-docs/1.1da62135.js" as="script">
<link rel="preload" href="/ink-docs/2.fca416f2.js" as="script">
<link rel="preload" href="/ink-docs/37.f15770d0.js" as="script">
<link rel="preload" href="/ink-docs/935f2afb.ef44755c.js" as="script">
<link rel="preload" href="/ink-docs/17896441.8799f5f5.js" as="script">
<link rel="preload" href="/ink-docs/43aa2aa0.0021dc66.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/ink-docs/"><img class="navbar__logo" src="/ink-docs/img/logo-black.svg" alt="ink!"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/paritytech/ink" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">ink! GitHub</a><a href="https://github.com/paritytech/ink-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/ink-docs/"><img class="navbar__logo" src="/ink-docs/img/logo-black.svg" alt="ink!"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/paritytech/ink" target="_blank" rel="noopener noreferrer" class="menu__link">ink! GitHub</a></li><li class="menu__list-item"><a href="https://github.com/paritytech/ink-docs" target="_blank" rel="noopener noreferrer" class="menu__link">Docs GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/why-rust-for-smart-contracts">Why Rust for Smart Contracts?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/how-it-works">How it works â€’ Substrate</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/getting-started/setup">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/getting-started/creating-an-ink-project">Creating an ink! Project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/getting-started/building-your-contract">Building Your Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/getting-started/running-substrate">Running a Substrate Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/getting-started/deploying-your-contract">Deploying Your Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/getting-started/calling-your-contract">Calling Your Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/getting-started/testing-your-contract">Testing Your Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/getting-started/troubleshooting">Troubleshooting</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/contract-template">Contract Template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/constructors">Constructors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/chain-types">Chain Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/storing-values">Storing Values</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/reading-values">Reading Values from Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/mutating-values">Mutating Storage Values</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/events">Events</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/ink-docs/basics/trait-definitions">Trait Definitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/cross-contract-calling">Cross-Contract Calling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ink-docs/basics/off-chain-testing">Off-chain Testing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Macros &amp; Attributes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/ink-macros-attributes">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Data Structures</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/datastructures/custom">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/datastructures/hashmap">HashMap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/datastructures/hashmap-lazy-eager">HashMap Lazy vs. Eager</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/datastructures/custom-datastructure">Your Custom Datastructure</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/examples">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">cargo-contract CLI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/cargo-contract-cli">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Canvas Test Network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/canvas">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ink-docs/faq">Frequently Asked Questions</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Trait Definitions</h1></header><div class="markdown"><p>See e.g. the <a href="https://github.com/paritytech/ink/blob/master/examples/trait-erc20/lib.rs#L49-L51" target="_blank" rel="noopener noreferrer"><code>examples/trait-erc20</code></a> contract on how to utilize it or <a href="https://paritytech.github.io/ink/ink_lang/attr.trait_definition.html" target="_blank" rel="noopener noreferrer">the documentation</a> for details.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="trait-support"></a>Trait Support<a aria-hidden="true" tabindex="-1" class="hash-link" href="#trait-support" title="Direct link to heading">#</a></h2><p>One of the most anticipated features of ink! 3.0 is its Rust trait support.
Through the new <code>#[ink::trait_definition]</code> proc. macro it is now possible to define your very own trait definitions that are then implementable by ink! smart contracts.</p><p>This allows to defined shared smart contract interfaces to different concrete implementations.
Note that this ink! trait definition can be defined anywhere, even in another crate!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="example"></a>Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#example" title="Direct link to heading">#</a></h3><p>Defined in the <code>base_erc20.rs</code> module.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-rust codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token plain">use ink_lang as ink;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">#[ink::trait_definition]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">pub trait BaseErc20 {</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    /// Creates a new ERC-20 contract and initializes it with the initial supply for the instantiator.</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    #[ink(constructor)]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    fn new(initial_supply: Balance) -&gt; Self;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    /// Returns the total supply.</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    #[ink(message)]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    fn total_supply(&amp;self) -&gt; Balance;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    /// Transfers `amount` from caller to `to`.</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    #[ink(message, payable)]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    fn transfer(&amp;mut self, to: AccountId, amount: Balance);</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">}</span></div></div></div></div></div><p>An ink! smart contract definition can then implement this trait definition as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-rust codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token plain">use ink_lang as ink;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">#[ink::contract]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">mod erc20 {</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    use base_erc20::BaseErc20;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    #[ink(storage)]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    pub struct Erc20 {</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        total_supply: Balance,</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        // more fields ...</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    }</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    impl BaseErc20 for Erc20 {</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        #[ink(constructor)]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        fn new(initial_supply: Balance) -&gt; Self {</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">            // implementation ...</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        }</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        #[ink(message)]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        fn total_supply(&amp;self) -&gt; Balance {</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">            // implementation ...</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        }</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        #[ink(message, payable)]</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        fn transfer(&amp;mut self, to: AccountId, amount: Balance) {</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">            // implementation ...</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">        }</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">    }</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">}</span></div></div></div></div></div><p>Calling the above <code>Erc20</code> explicitely through its trait implementation can be done just as if it was normal Rust code:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-rust codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#2a2734;color:#9a86fd"><div class="token-line" style="color:#9a86fd"><span class="token plain">// --- Instantiating the ERC-20 contract:</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">//</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">let mut erc20 = &lt;Erc20 as BaseErc20&gt;::new(1000);</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">// --- Is just the same as:</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">use base_erc20::BaseErc20;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">let mut erc20 = Erc20::new(1000);</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">// --- Retrieving the total supply:</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">//</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">assert_eq!(&lt;Erc20 as BaseErc20&gt;::total_supply(&amp;erc20), 1000);</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">// --- Is just the same as:</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">use base_erc20::BaseErc20;</span></div><div class="token-line" style="color:#9a86fd"><span class="token plain">assert_eq!(erc20.total_supply(), 1000);</span></div></div></div></div></div><p>There are still many limitations to ink! trait definitions and trait implementations.
For example it is not possible to define associated constants or types or have default implemented methods.
These limitations exist because of technical intricacies, however, please expect that many of those will be tackled in future ink! releases.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ink-docs/edit/master/docs/basics/trait-definitions.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ink-docs/basics/events"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Events</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ink-docs/basics/cross-contract-calling"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cross-Contract Calling Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#trait-support" class="table-of-contents__link">Trait Support</a><ul><li><a href="#example" class="table-of-contents__link">Example</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/ink-docs/styles.95ffbc63.js"></script>
<script src="/ink-docs/runtime~main.515953f5.js"></script>
<script src="/ink-docs/main.5a793521.js"></script>
<script src="/ink-docs/1.1da62135.js"></script>
<script src="/ink-docs/2.fca416f2.js"></script>
<script src="/ink-docs/37.f15770d0.js"></script>
<script src="/ink-docs/935f2afb.ef44755c.js"></script>
<script src="/ink-docs/17896441.8799f5f5.js"></script>
<script src="/ink-docs/43aa2aa0.0021dc66.js"></script>
</body>
</html>